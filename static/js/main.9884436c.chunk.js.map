{"version":3,"sources":["App.js","index.js"],"names":["magic","Magic","extensions","tezos","TezosExtension","rpcUrl","App","_useState","useState","_useState2","Object","slicedToArray","email","setEmail","_useState3","_useState4","publicAddress","setPublicAddress","_useState5","_useState6","destinationAddress","setDestinationAddress","_useState7","_useState8","sendXTZAmount","setSendXTZAmount","_useState9","_useState10","contractoperationGroupID","setContractoperationGroupID","_useState11","_useState12","isLoggedIn","setIsLoggedIn","_useState13","_useState14","userMetadata","setUserMetadata","_useState15","_useState16","transactionOperationGroupID","setTransactionOperationGroupID","useEffect","user","then","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","magicIsLoggedIn","_publicAddress","wrap","_context","prev","next","getAccount","sent","t0","getMetadata","t1","stop","_x","apply","this","arguments","login","_ref2","_callee2","_context2","auth","loginWithMagicLink","logout","_ref3","_callee3","_context3","handlerSendTransaction","_ref4","_callee4","result","operationGroupID","_context4","sendTransactionOperation","parseInt","trim","substring","length","console","log","concat","handleSendContractOrigination","_ref5","_callee5","params","_context5","amount","delegate","undefined","fee","derivationPath","storage_limit","gas_limit","code","storage","codeFormat","sendContractOriginationOperation","react_default","createElement","className","onClick","href","target","type","name","required","placeholder","onChange","event","value","id","rootElement","document","getElementById","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.9884436c.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./styles.css\";\n\nimport { Magic } from \"magic-sdk\";\nimport { TezosExtension } from \"@magic-ext/tezos\";\n\nconst magic = new Magic(\"pk_test_4D84A95497B1CF87\", {\n  extensions: {\n    tezos: new TezosExtension({\n      rpcUrl: \"https://tezos-dev.cryptonomic-infra.tech:443/\"\n    })\n  }\n});\n\nexport default function App() {\n  const [email, setEmail] = useState(\"\");\n  const [publicAddress, setPublicAddress] = useState(\"\");\n  const [destinationAddress, setDestinationAddress] = useState(\"\");\n  const [sendXTZAmount, setSendXTZAmount] = useState(0);\n  const [contractoperationGroupID, setContractoperationGroupID] = useState(\"\");\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [userMetadata, setUserMetadata] = useState({});\n  const [transactionOperationGroupID, setTransactionOperationGroupID] = useState(\"\");\n\n  useEffect(() => {\n    magic.user.isLoggedIn().then(async magicIsLoggedIn => {\n      setIsLoggedIn(magicIsLoggedIn);\n      if (magicIsLoggedIn) {\n        const publicAddress = await magic.tezos.getAccount();\n        setPublicAddress(publicAddress);\n        setUserMetadata(await magic.user.getMetadata());\n      }\n    });\n  }, [isLoggedIn]);\n\n  const login = async () => {\n    await magic.auth.loginWithMagicLink({ email });\n    setIsLoggedIn(true);\n  };\n\n  const logout = async () => {\n    await magic.user.logout();\n    setIsLoggedIn(false);\n  };\n\n  const handlerSendTransaction = async () => {\n    const result = await magic.tezos.sendTransactionOperation(\n      destinationAddress,\n      parseInt(sendXTZAmount * 1000000),\n      15000,\n      \"\"\n    );\n\n    const operationGroupID = result.operationGroupID.trim();\n\n    setTransactionOperationGroupID(\n        operationGroupID.substring(1, operationGroupID.length - 1)\n    );\n    console.log(`Injected operation group id ${operationGroupID}`);\n\n  };\n\n  const handleSendContractOrigination = async () => {\n    const contract = `[\n    {\n       \"prim\":\"parameter\",\n       \"args\":[ { \"prim\":\"string\" } ]\n    },\n    {\n       \"prim\":\"storage\",\n       \"args\":[ { \"prim\":\"string\" } ]\n    },\n    {\n       \"prim\":\"code\",\n       \"args\":[\n          [  \n             { \"prim\":\"CAR\" },\n             { \"prim\":\"NIL\", \"args\":[ { \"prim\":\"operation\" } ] },\n             { \"prim\":\"PAIR\" }\n          ]\n       ]\n    }\n ]`;\n    const storage = '{\"string\": \"Sample\"}';\n\n    const params = {\n      amount: 0,\n      delegate: undefined,\n      fee: 100000,\n      derivationPath: \"\",\n      storage_limit: 1000,\n      gas_limit: 100000,\n      code: contract,\n      storage,\n      codeFormat: \"micheline\"\n    };\n\n    const result = await magic.tezos.sendContractOriginationOperation(\n      params.amount,\n      params.delegate,\n      params.fee,\n      params.derivationPath,\n      params.storage_limit,\n      params.gas_limit,\n      params.code,\n      params.storage,\n      params.codeFormat\n    );\n\n    const operationGroupID = result.operationGroupID.trim();\n\n    setContractoperationGroupID(\n      operationGroupID.substring(1, operationGroupID.length - 1)\n    );\n    console.log(\n      `Injected operation group id ${result.operationGroupID}`,\n      result\n    );\n  };\n\n  return (\n    <div className=\"App\">\n      {!isLoggedIn ? (\n        <div className=\"container\">\n          <h1>Please sign up or login</h1>\n          <input\n            type=\"email\"\n            name=\"email\"\n            required=\"required\"\n            placeholder=\"Enter your email\"\n            onChange={event => {\n              setEmail(event.target.value);\n            }}\n          />\n          <button onClick={login}>Send</button>\n        </div>\n      ) : (\n        <div>\n          <div className=\"container\">\n            <h1>Current user: {userMetadata.email}</h1>\n            <button onClick={logout}>Logout</button>\n          </div>\n          <div className=\"container\">\n            <h1>Tezos address</h1>\n            <div className=\"info\">\n              <a\n                href={`https://carthagenet.tzstats.com/${publicAddress}`}\n                target=\"_blank\"\n              >\n                {publicAddress}\n              </a>\n            </div>\n          </div>\n          <div className=\"container\">\n            <h1>Send Transaction</h1>\n            {\n              transactionOperationGroupID ?\n                  <div>\n                    <div>\n                      Send transaction success\n                    </div>\n                    <div className=\"info\">\n                      <a\n                          href={`https://carthagenet.tzstats.com/${transactionOperationGroupID}`}\n                          target=\"_blank\"\n                      >\n                        {transactionOperationGroupID}\n                      </a>\n                    </div>\n                  </div>\n                  :\n                  <div/>\n            }\n            <input\n              type=\"text\"\n              name=\"destination\"\n              className=\"full-width\"\n              required=\"required\"\n              placeholder=\"Destination address\"\n              onChange={event => {\n                setDestinationAddress(event.target.value);\n              }}\n            />\n            <input\n              type=\"text\"\n              name=\"amount\"\n              className=\"full-width\"\n              required=\"required\"\n              placeholder=\"Amount in XTZ\"\n              onChange={event => {\n                setSendXTZAmount(event.target.value);\n              }}\n            />\n            <button id=\"btn-send-txn\" onClick={handlerSendTransaction}>\n              Send Transaction\n            </button>\n          </div>\n          <div className=\"container\">\n            <h1>Smart Contract</h1>\n            <div className=\"info\">\n              <a\n                href={`https://carthagenet.tzstats.com/${contractoperationGroupID}`}\n                target=\"_blank\"\n              >\n                {contractoperationGroupID}\n              </a>\n            </div>\n            <button id=\"btn-deploy\" onClick={handleSendContractOrigination}>\n              Deploy Contract\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}